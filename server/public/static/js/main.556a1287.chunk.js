(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(65)},46:function(e,t,a){},47:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(20),r=a.n(s),o=(a(46),a(9)),l=a(10),c=a(13),u=a(11),h=a(15),m=a(12),p=(a(47),a(21)),d=a(17),g=a(22),f=a(36),E=a(37),k=a(39),v=a(69),y=a(66),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.register=function(e){a.setState({registerForm:!0})},a.backToLogin=function(e){a.setState({registerForm:!1})},a.handleLogin=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.state,n=t.email,i=t.password;fetch("/api/account/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i})}).then(function(e){return e.json()}).then(function(e){e.success?(a.props.saveToken(e.token),localStorage.setItem("tokenItem",e.token),a.setState({toHome:!0,isLoading:!1})):(a.setState({signUpError:e.message}),alert("invalid login"),a.setState({isLoading:!1}))})},a.handleSubmit=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.state,n=t.email,i=t.password,s=t.username;fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i,username:s})}).then(function(e){return e.json()}).then(function(e){e.success?(a.setState({signUpError:e.message,isLoading:!1,email:"",password:"",username:""}),a.setState({registerForm:!1})):(a.setState({signUpError:e.message,isLoading:!1}),alert("Username or email taken! Try again."))})},a.state={email:"",password:"",username:"",isLoading:!0,signUpError:"",registerForm:!1,token:a.props.token,validSession:!1,toHome:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("/api/account/verify",{method:"GET",headers:{"Content-Type":"application/json",token:this.state.token}}).then(function(e){return e.json()}).then(function(t){t.success?e.setState({validSession:!0}):e.setState({validSession:!1}),e.setState({isLoading:!1})})}},{key:"render",value:function(){return this.state.toHome?i.a.createElement(d.a,{to:"/home"}):this.state.isLoading?i.a.createElement(y.a,null," ",i.a.createElement("div",{className:"text-center"},i.a.createElement("h2",{className:"text-center"},"Loading ... ")," ")):this.state.registerForm?i.a.createElement(y.a,null,i.a.createElement("div",{className:"Login"},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(f.a,{controlId:"email",bsSize:"large"},i.a.createElement(E.a,null,"Email  "),i.a.createElement(k.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(f.a,{controlId:"username",bsSize:"large"},i.a.createElement(E.a,null,"Username  "),i.a.createElement(k.a,{value:this.state.username,onChange:this.handleChange,type:"username"})),i.a.createElement(f.a,{controlId:"password",bsSize:"large"},i.a.createElement(E.a,null,"Password  "),i.a.createElement(k.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),i.a.createElement(v.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",variant:"info"},"Register"),i.a.createElement("br",null),i.a.createElement(v.a,{block:!0,bsSize:"small",type:"submit",variant:"info",onClick:this.backToLogin},"Go Back")))):this.state.token&&!1!==this.state.validSession?i.a.createElement("div",null,i.a.createElement("p",null,"Signed in"),i.a.createElement("div",null,i.a.createElement(d.a,{to:"/home"}))):i.a.createElement(y.a,null,i.a.createElement("div",null,i.a.createElement("p",null,"Login here: "),i.a.createElement("form",{onSubmit:this.handleLogin},i.a.createElement(f.a,{controlId:"email",bsSize:"large"},i.a.createElement(E.a,null,"Email  "),i.a.createElement(k.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(f.a,{controlId:"password",bsSize:"large"},i.a.createElement(E.a,null,"Password  "),i.a.createElement(k.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),i.a.createElement(v.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",variant:"info"},"Login")),i.a.createElement("br",null),i.a.createElement(v.a,{block:!0,bsSize:"large",type:"button",variant:"info",onClick:this.register},"Register")))}}]),t}(n.Component),S=a(29),C=a(38),w=a(67),j=a(68),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={ratingButtons:a.props.ratingButtons},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(y.a,null,i.a.createElement("br",null),i.a.createElement(v.a,{variant:"info",onClick:this.props.goBack},"Go Back"),i.a.createElement("h1",null,this.props.title)," ",i.a.createElement("p",null,"by ",this.props.user)," ",i.a.createElement("img",{className:"img-fluid shadow-lg p-2 mb-3 rounded",style:{"max-height":550},src:this.props.imgSrc})," ",this.state.ratingButtons," ",this.props.elements," ",i.a.createElement("br",null)," ",i.a.createElement("p",null,this.props.longDesc),i.a.createElement("p",null,this.props.instructions),i.a.createElement("br",null))}}]),t}(i.a.Component),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.state,n=t.title,i=t.shortDesc,s=t.longDesc,r=t.ingredients,o=t.instructions,l=t.imageURL,c=r.replace(/\s*,\s*/g,",").split(",");c=c.map(function(e){return""+e[0].toUpperCase()+e.slice(1)}),fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a.props.token,user:a.props.user,title:n,description:i,longDescription:s,ingredients:c,instructions:o,image:l})}).then(function(e){return e.json()}).then(function(e){e.success?(alert("Recipi saved!"),a.props.goBack(!0)):alert("Failed! Server error.")})},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.state={title:"",shortDesc:"",longDesc:"",ingredients:[],instructions:"",imageURL:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"col"},i.a.createElement("h2",{className:"text-center"},"Here's your form, ",this.props.user),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(f.a,{controlId:"title",bsSize:"large"},i.a.createElement(E.a,null,"Recipi Title  "),i.a.createElement(k.a,{autoFocus:!0,type:"title",value:this.state.title,onChange:this.handleChange})),i.a.createElement(f.a,{controlId:"shortDesc",bsSize:"large"},i.a.createElement(E.a,null,"A short summay  "),i.a.createElement(k.a,{value:this.state.shortDesc,onChange:this.handleChange,type:"shortDesc"})),i.a.createElement(f.a,{controlId:"longDesc",bsSize:"large"},i.a.createElement(E.a,null,"A longer description  "),i.a.createElement(k.a,{value:this.state.longDesc,onChange:this.handleChange,type:"longDesc"})),i.a.createElement(f.a,{controlId:"instructions",bsSize:"large"},i.a.createElement(E.a,null,"Recipi instructions  "),i.a.createElement(k.a,{value:this.state.instructions,onChange:this.handleChange,type:"instructions"})),i.a.createElement(f.a,{controlId:"ingredients",bsSize:"large"},i.a.createElement(E.a,null,"Ingredients  "),i.a.createElement(k.a,{value:this.state.ingredients,onChange:this.handleChange,type:"ingredients"})),i.a.createElement(f.a,{controlId:"imageURL",bsSize:"large"},i.a.createElement(E.a,null,"Image URL  "),i.a.createElement(k.a,{value:this.state.imageURL,onChange:this.handleChange,type:"imageURL"})),i.a.createElement(v.a,{block:!0,bsSize:"large",type:"submit",variant:"info"},"Submit your Recipi!"),i.a.createElement("br",null),i.a.createElement(v.a,{variant:"info",onClick:function(){e.props.goBack(!1)}},"Go back")))}}]),t}(i.a.Component),T=a(16),L={width:"62%",height:"62%"},D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMarkerClick=function(e,t,n){return a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.state={token:"",isLoading:!0,showingInfoWindow:!1,activeMarker:{},selectedPlace:{},userLocation:{lat:30.26,lng:-97.74}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){var a=t.coords,n=a.latitude,i=a.longitude;e.setState({userLocation:{lat:n,lng:i},isLoading:!1})},function(){e.setState({isLoading:!1})})}},{key:"render",value:function(){return this.state.isLoading?i.a.createElement("div",null,"Loading ... "):i.a.createElement(T.Map,{google:this.props.google,zoom:14,style:L,initialCenter:this.state.userLocation},i.a.createElement(T.Marker,{position:{lat:30.254659,lng:-97.762101},onClick:this.onMarkerClick,name:"Odd Duck"}),i.a.createElement(T.Marker,{position:{lat:30.249659,lng:-97.749984},onClick:this.onMarkerClick,name:"Hopdoddy"}),i.a.createElement(T.Marker,{position:{lat:30.245221,lng:-97.779389},onClick:this.onMarkerClick,name:"Matt's El Rancho"}),i.a.createElement(T.Marker,{position:{lat:30.249199,lng:-97.749589},onClick:this.onMarkerClick,name:"Home Slice"}),i.a.createElement(T.Marker,{position:{lat:30.266742,lng:-97.744948},onClick:this.onMarkerClick,name:"Truluck's"}),i.a.createElement(T.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},i.a.createElement("div",null,i.a.createElement("h4",null,this.state.selectedPlace.name))))}}]),t}(n.Component),M=Object(T.GoogleApiWrapper)({apiKey:"AIzaSyClOhMinsJlKmviBdX43_mVHtn4Uk7qb6k"})(D),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSearch=function(e){var t="";e?(t=e.target.value,a.setState({searchTerm:t})):t=a.state.searchTerm;var n=t.toLowerCase(),s=a.state.recipes.map(function(e){return a.state.recipeTitleByIndex[e.key].includes(n)?e:i.a.createElement("div",null)});a.setState({filtRecipes:s})},a.state={token:a.props.token,isLoggedIn:!1,userData:"",recipes:[],logout:!1,isLoading:!0,inputRecipe:"",recipeDescription:"",searchTerm:"",recipeTitleByIndex:[],filtRecipes:[],myRecipes:[i.a.createElement("h3",null,"Nothing to show!")],showMyRecipes:!1,toggleMyRecipesText:"Show My Recipis",showMap:!1},a.goBack=a.goBack.bind(Object(h.a)(a)),a.showInput=a.showInput.bind(Object(h.a)(a)),a.loadRecipes=a.loadRecipes.bind(Object(h.a)(a)),a.plusRating=a.plusRating.bind(Object(h.a)(a)),a.toggleMyRecipes=a.toggleMyRecipes.bind(Object(h.a)(a)),a.toggleMap=a.toggleMap.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("/api/account/verify",{method:"GET",headers:{"Content-Type":"application/json",token:this.state.token}}).then(function(e){return e.json()}).then(function(t){t.success?(e.setState({isLoggedIn:!0,userData:t.userData.userName,isLoading:!1}),e.loadRecipes()):e.setState({isLoggedIn:!1,isLoading:!1})})}},{key:"capitalize_Words",value:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},{key:"showInput",value:function(){this.setState({inputRecipe:i.a.createElement(y.a,null,i.a.createElement("div",{className:"row align-items-center justify-content-center"},i.a.createElement(R,{user:this.state.userData,token:this.state.token,goBack:this.goBack})))})}},{key:"goBack",value:function(e){e&&this.loadRecipes(),this.setState({inputRecipe:""})}},{key:"jsUcfirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}},{key:"plusRating",value:function(e,t){var a=this,n=this;fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:this.state.userData,recipeTitle:e,token:this.state.token})}).then(function(e){return e.json()}).then(function(s){s.success?fetch("/api/recipes/plusrating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,token:a.state.token})}).then(function(e){return e.json()}).then(function(s){if(s.success){var r={};fetch("/api/recipes/find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,token:a.state.token})}).then(function(e){return e.json()}).then(function(e){r=e[0];var a=Object(S.a)(n.state.recipes),s=i.a.createElement("div",null,i.a.createElement("p",null,"Already voted!")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",r.rating," "));a[t]=i.a.createElement(C.a,{key:t,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left"}},"    ",i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},n.capitalize_Words(r.title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",r.user," "),i.a.createElement("br",null)," ",n.jsUcfirst(r.description)),i.a.createElement("img",{onClick:function(){n.showDesc(r,s)},src:r.image,id:"imgClick",style:{height:"auto",maxHeight:"275px"},className:"img-fluid shadow p-1 mb-3 rounded"}),s,i.a.createElement("br",null))),n.setState({recipes:a}),n.state.recipeDescription&&(n.setState({recipeDescription:""}),n.showDesc(r,s)),n.state.searchTerm&&n.handleSearch(),n.state.showMyRecipes&&n.loadRecipes()})}}):alert("already voted!")})}},{key:"minusRating",value:function(e,t){var a=this,n=this;fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:this.state.userData,recipeTitle:e,token:this.state.token})}).then(function(e){return e.json()}).then(function(s){s.success?fetch("/api/recipes/minusrating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,token:a.state.token})}).then(function(e){return e.json()}).then(function(s){if(s.success){var r={};fetch("/api/recipes/find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,token:a.state.token})}).then(function(e){return e.json()}).then(function(e){r=e[0];var a=Object(S.a)(n.state.recipes),s=i.a.createElement("div",null,i.a.createElement("p",null,"Already voted!")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",r.rating," "));a[t]=i.a.createElement(C.a,{key:t,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left"}},"    ",i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},n.capitalize_Words(r.title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",r.user," "),i.a.createElement("br",null)," ",n.jsUcfirst(r.description)),i.a.createElement("img",{onClick:function(){n.showDesc(r,s)},src:r.image,id:"imgClick",style:{height:"auto",maxHeight:"275px"},className:"img-fluid shadow p-1 mb-3 rounded"}),s,i.a.createElement("br",null))),n.setState({recipes:a}),n.state.recipeDescription&&(n.setState({recipeDescription:""}),n.showDesc(r,s)),n.state.searchTerm&&n.handleSearch(),n.state.showMyRecipes&&n.loadRecipes()})}}):alert("already voted!")})}},{key:"loadRecipes",value:function(){var e=this,t=this;return this.setState({isLoading:!0}),fetch("/api/recipes",{method:"GET",headers:{token:this.state.token}}).then(function(e){return e.json()}).then(function(a){var n=[],s=[];a.sort(function(e,t){return t.rating-e.rating});for(var r=function(r){var o=fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t.state.userData,recipeTitle:a[r].title,dontChange:!0,token:e.state.token})}).then(function(e){return e.json()}).then(function(n){var o="";o=n.success?i.a.createElement("div",null,i.a.createElement(v.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){e.plusRating(a[r].title,r)}}," + "),i.a.createElement(v.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){e.minusRating(a[r].title,r)}}," - ")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",a[r].rating," ")):i.a.createElement("div",null,i.a.createElement("p",null,"Already voted!")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",a[r].rating," "));var l=t.state.recipeTitleByIndex;return l[r]=a[r].title,t.setState({recipeTitleByIndex:l}),t.state.userData===a[r].user&&(console.log("adding a recipe to the myRecipes array. recipe author is: "+a[r].user+" and current user is: "+t.state.userData),s.push(i.a.createElement(C.a,{key:r,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left"}},"    ",i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},e.capitalize_Words(a[r].title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",a[r].user," "),i.a.createElement("br",null)," ",e.jsUcfirst(a[r].description)),i.a.createElement("img",{onClick:function(){e.showDesc(a[r],o)},src:a[r].image,id:"imgClick",style:{height:"auto",maxHeight:"275px"},className:"img-fluid shadow p-1 mb-3 rounded"}),o,i.a.createElement("br",null))))),i.a.createElement(C.a,{key:r,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left"}},"    ",i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},e.capitalize_Words(a[r].title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",a[r].user," "),i.a.createElement("br",null)," ",e.jsUcfirst(a[r].description)),i.a.createElement("img",{onClick:function(){e.showDesc(a[r],o)},src:a[r].image,id:"imgClick",style:{height:"auto",maxHeight:"275px"},className:"img-fluid shadow p-1 mb-3 rounded"}),o,i.a.createElement("br",null)))});n.push(o)},o=0;o<a.length;o++)r(o);Promise.all(n).then(function(t){s[0]||s.push(i.a.createElement("h3",null,"Nothing to show!")),e.setState({recipes:t,myRecipes:s,isLoading:!1})})})}},{key:"showDesc",value:function(e,t){for(var a=this,n=[],s=0;s<e.ingredients.length;s++)n.push(i.a.createElement("div",null,"\u2022"," ",e.ingredients[s],i.a.createElement("br",null)));var r=i.a.createElement(O,{ratingButtons:t,title:this.capitalize_Words(e.title),user:e.user,imgSrc:e.image,elements:n,longDesc:e.longDescription,instructions:e.instructions,goBack:function(){a.setState({recipeDescription:""})}});this.setState({recipeDescription:r})}},{key:"toggleMyRecipes",value:function(){this.state.showMyRecipes?this.setState({showMyRecipes:!1,toggleMyRecipesText:"Show My Recipis"}):this.setState({showMyRecipes:!0,toggleMyRecipesText:"Show All Recipis"})}},{key:"toggleMap",value:function(){this.state.showMap?this.setState({showMap:!1}):this.setState({showMap:!0})}},{key:"logout",value:function(e){this.setState({isLoading:!0}),this.props.saveToken(""),this.setState({logout:!0,isLoggedIn:!1,isLoading:!1})}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return i.a.createElement(y.a,null," ",i.a.createElement("div",{className:"text-center"},i.a.createElement("h2",{className:"text-center"},"Loading ... ")," "));if(this.state.recipeDescription)return this.state.recipeDescription;if(this.state.logout)return i.a.createElement(d.a,{to:"/"});if(this.state.inputRecipe)return this.state.inputRecipe;if(this.state.token){if(this.state.isLoggedIn){var t="";return t=""!==this.state.searchTerm?i.a.createElement(w.a,null,this.state.filtRecipes):i.a.createElement(w.a,null,this.state.recipes),this.state.showMyRecipes&&(t=i.a.createElement(w.a,null,this.state.myRecipes)),this.state.showMap&&(t=i.a.createElement("div",{className:"text-center",style:{height:"1000px",margin:"0px"}},i.a.createElement(M,null))),i.a.createElement("div",null,i.a.createElement(y.a,null,i.a.createElement("h3",{className:"text-center"}," Welcome ",this.state.userData,", check out these Recipis!"),i.a.createElement(j.a,{onSubmit:function(e){e.preventDefault()}},i.a.createElement(j.a.Group,{controlId:"formSearchTerms"},i.a.createElement(j.a.Control,{value:this.state.searchTerm,onChange:this.handleSearch,type:"search",placeholder:"Search Recipi titles ..."}))),i.a.createElement("br",null),i.a.createElement("div",{className:"text-center"},i.a.createElement(v.a,{className:"btn",variant:"info",onClick:this.showInput},"Post a Recipi"),"    ",i.a.createElement("span",null," "),i.a.createElement(v.a,{className:"btn",variant:"info",onClick:this.toggleMyRecipes},this.state.toggleMyRecipesText),"    ",i.a.createElement("span",null," "),i.a.createElement(v.a,{className:"btn",variant:"info",onClick:this.toggleMap},"Toggle Map")),i.a.createElement("br",null),t,i.a.createElement("br",null),i.a.createElement("div",{className:"text-center"},i.a.createElement(v.a,{className:"btn",variant:"secondary",onClick:function(){e.logout(e.state.token)}},"Logout"))))}return i.a.createElement(y.a,null,i.a.createElement("div",{className:"text-center"},i.a.createElement("p",null,"Loading ... ")))}return this.state.token?void 0:i.a.createElement("div",null,i.a.createElement(d.a,{to:"/"}))}}]),t}(i.a.Component),I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={token:""},e.saveToken=e.saveToken.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(document.title="Recipi",""===this.state.token&&localStorage.getItem("tokenItem")){var t=localStorage.getItem("tokenItem");this.setState({token:t})}else this.state.token&&fetch("/api/account/verify",{method:"GET",headers:{"Content-Type":"application/json",token:this.state.token}}).then(function(e){return e.json()}).then(function(t){t.success?console.log("token is valid"):e.saveToken("")})}},{key:"saveToken",value:function(e){console.log("saveToken is called with token: "+e),localStorage.setItem("tokenItem",e),this.setState({token:e})}},{key:"render",value:function(){var e=this;return i.a.createElement(p.a,null,i.a.createElement("div",{className:"App"},i.a.createElement("header",{id:"headerClick",style:{backgroundColor:"#6dc4ed"}},i.a.createElement("h1",{onClick:function(){window.location.href="/"},className:"Recipi"}," Recipi ")),i.a.createElement("body",{style:{backgroundColor:"#e6f5fc",color:"#1c7fad",fontFamily:"Quicksand"}},i.a.createElement(d.b,{exact:!0,path:"/",render:function(){return i.a.createElement(d.a,{to:"/login"})}}),i.a.createElement(d.b,{exact:!0,path:"/login",render:function(t){return i.a.createElement(b,Object.assign({},t,{token:e.state.token,saveToken:e.saveToken}))}}),i.a.createElement(d.b,{exact:!0,path:"/home",render:function(t){return i.a.createElement(x,Object.assign({},t,{token:e.state.token,saveToken:e.saveToken}))}}),i.a.createElement("br",null)),i.a.createElement("footer",{style:{backgroundColor:"#6dc4ed"}},"Website built by Nicolai Antonov, 2019")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);r.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.556a1287.chunk.js.map
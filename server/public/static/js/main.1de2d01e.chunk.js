(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(65)},46:function(e,t,a){},47:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(18),o=a.n(s),r=(a(46),a(10)),l=a(11),c=a(13),u=a(12),h=a(7),m=a(14),p=(a(47),a(21)),d=a(17),g=a(22),f=a(35),E=a(36),b=a(38),y=a(69),k=a(66),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.register=function(e){a.setState({registerForm:!0})},a.backToLogin=function(e){a.setState({registerForm:!1})},a.handleLogin=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.state,n=t.email,i=t.password;fetch("/api/account/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i})}).then(function(e){return e.json()}).then(function(e){e.success?(a.props.saveToken(e.token),localStorage.setItem("tokenItem",e.token),a.setState({toHome:!0,isLoading:!1})):(a.setState({signUpError:e.message}),alert("invalid login"),a.setState({isLoading:!1}))})},a.handleSubmit=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.state,n=t.email,i=t.password,s=t.username;fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i,username:s})}).then(function(e){return e.json()}).then(function(e){e.success?(a.setState({signUpError:e.message,isLoading:!1,email:"",password:"",username:""}),a.setState({registerForm:!1})):(a.setState({signUpError:e.message,isLoading:!1}),alert("Username or email taken! Try again."))})},a.state={email:"",password:"",username:"",isLoading:!0,signUpError:"",registerForm:!1,token:a.props.token,validSession:!1,toHome:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("/api/account/verify",{method:"GET",headers:{"Content-Type":"application/json",token:this.state.token}}).then(function(e){return e.json()}).then(function(t){t.success?e.setState({validSession:!0}):e.setState({validSession:!1}),e.setState({isLoading:!1})})}},{key:"render",value:function(){return this.state.toHome?i.a.createElement(d.a,{to:"/home"}):this.state.isLoading?i.a.createElement(k.a,{style:{height:"900px"}}," ",i.a.createElement("div",{className:"text-center"},i.a.createElement("h2",{className:"text-center"},"Loading ... ")," ")):this.state.registerForm?i.a.createElement(k.a,{style:{height:"900px"}},i.a.createElement("div",{className:"Login"},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(f.a,{controlId:"email",bsSize:"large"},i.a.createElement(E.a,null,"Email  "),i.a.createElement(b.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(f.a,{controlId:"username",bsSize:"large"},i.a.createElement(E.a,null,"Username  "),i.a.createElement(b.a,{value:this.state.username,onChange:this.handleChange,type:"username"})),i.a.createElement(f.a,{controlId:"password",bsSize:"large"},i.a.createElement(E.a,null,"Password  "),i.a.createElement(b.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),i.a.createElement(y.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",variant:"info"},"Register"),i.a.createElement("br",null),i.a.createElement(y.a,{block:!0,bsSize:"small",type:"submit",variant:"info",onClick:this.backToLogin},"Go Back")))):this.state.token&&!1!==this.state.validSession?i.a.createElement("div",null,i.a.createElement("p",null,"Signed in"),i.a.createElement("div",null,i.a.createElement(d.a,{to:"/home"}))):i.a.createElement(k.a,{style:{height:"900px"}},i.a.createElement("div",null,i.a.createElement("p",null,"Login here: "),i.a.createElement("form",{onSubmit:this.handleLogin},i.a.createElement(f.a,{controlId:"email",bsSize:"large"},i.a.createElement(E.a,null,"Email  "),i.a.createElement(b.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(f.a,{controlId:"password",bsSize:"large"},i.a.createElement(E.a,null,"Password  "),i.a.createElement(b.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),i.a.createElement(y.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",variant:"info"},"Login")),i.a.createElement("br",null),i.a.createElement(y.a,{block:!0,bsSize:"large",type:"button",variant:"info",onClick:this.register},"Register")))}}]),t}(n.Component),S=a(67),C=a(68),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.state,n=t.title,i=t.shortDesc,s=t.longDesc,o=t.ingredients,r=t.instructions,l=t.imageURL,c=t.restaurant,u=t.city,h=o.replace(/\s*,\s*/g,",").split(",");h=h.map(function(e){return e[0]?""+e[0].toUpperCase()+e.slice(1):"Unspecified"}),fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a.props.token,user:a.props.user,title:n,description:i,longDescription:s,ingredients:h,instructions:r,image:l})}).then(function(e){return e.json()}).then(function(e){e.success?(alert("Recipi saved!"),a.props.goBack(!0)):alert("Failed! Server error.")}),fetch("/api/markers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a.props.token,recipe:n,restaurant:c,city:u})}).then(function(e){return e.json()}).then(function(e){e.success&&console.log("marker saved successfully")})},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.state={title:"",shortDesc:"",longDesc:"",ingredients:[],instructions:"",imageURL:"",restaurant:"",city:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"col"},i.a.createElement("h2",{className:"text-center"},"Here's your form, ",this.props.user),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(f.a,{controlId:"title",bsSize:"large"},i.a.createElement(E.a,null,"Recipi Title  "),i.a.createElement(b.a,{autoFocus:!0,type:"title",value:this.state.title,onChange:this.handleChange,placeholder:"Enter your Recipi title ... "})),i.a.createElement(f.a,{controlId:"shortDesc",bsSize:"large"},i.a.createElement(E.a,null,"A short summay  "),i.a.createElement(b.a,{value:this.state.shortDesc,onChange:this.handleChange,type:"shortDesc",as:"textarea",placeholder:"Enter a short subtitle for your Recipi ... ",rows:"2"})),i.a.createElement(f.a,{controlId:"longDesc",bsSize:"large"},i.a.createElement(E.a,null,"A longer description  "),i.a.createElement(b.a,{value:this.state.longDesc,onChange:this.handleChange,type:"longDesc",as:"textarea",placeholder:"Enter your full description or Recipi story here ...",rows:"4"})),i.a.createElement(f.a,{controlId:"instructions",bsSize:"large"},i.a.createElement(E.a,null,"Recipi instructions  "),i.a.createElement(b.a,{value:this.state.instructions,onChange:this.handleChange,type:"instructions",as:"textarea",placeholder:"Enter your instructions ... ",rows:"4"})),i.a.createElement(f.a,{controlId:"ingredients",bsSize:"large"},i.a.createElement(E.a,null,"Ingredients  "),i.a.createElement(b.a,{value:this.state.ingredients,onChange:this.handleChange,type:"ingredients",as:"textarea",placeholder:"Separate by commas ...",rows:"4"})),i.a.createElement(f.a,{controlId:"imageURL",bsSize:"large"},i.a.createElement(E.a,null,"Image URL  "),i.a.createElement(b.a,{value:this.state.imageURL,onChange:this.handleChange,type:"imageURL"})),i.a.createElement(f.a,{controlId:"restaurant",bsSize:"large"},i.a.createElement(E.a,null,"(Optional) Restaurant  "),i.a.createElement(b.a,{value:this.state.restaurant,onChange:this.handleChange,type:"restaurant"})),i.a.createElement(f.a,{controlId:"city",bsSize:"large"},i.a.createElement(E.a,null,"(Optional) City  "),i.a.createElement(b.a,{value:this.state.city,onChange:this.handleChange,type:"city"})),i.a.createElement(y.a,{block:!0,bsSize:"large",type:"submit",variant:"info"},"Submit your Recipi!"),i.a.createElement("br",null),i.a.createElement(y.a,{variant:"info",onClick:function(){e.props.goBack(!1)}},"Go back")))}}]),t}(i.a.Component),x=a(20),j={width:"100%",height:"90%"},T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMarkerClick=function(e,t,n){console.dir(t),a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.state={token:a.props.token,isLoading:!0,showingInfoWindow:!1,activeMarker:{},selectedPlace:{},userLocation:{lat:30.26,lng:-97.74},recipiMarkers:[],displayMarkers:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){var a=t.coords,n=a.latitude,i=a.longitude;e.setState({userLocation:{lat:n,lng:i},isLoading:!1})},function(){e.setState({isLoading:!1})}),fetch("/api/markers",{method:"GET",headers:{token:this.state.token}}).then(function(e){return e.json()}).then(function(t){for(var a=e.state.recipiMarkers,n=0;n<t.length;n++){console.dir(t[n]);var s=i.a.createElement(x.Marker,{position:t[n].location,onClick:e.onMarkerClick,title:e.capitalize_Words(t[n].restaurant),name:e.capitalize_Words(t[n].recipe),key:n});a.push(s)}e.setState({recipiMarkers:a})})}},{key:"capitalize_Words",value:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},{key:"onInfoWindowOpen",value:function(e,t){var a=this,n=i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement("span",{onClick:function(){a.props.loadRecipeFromMap(a.state.selectedPlace.name,a.props.oldSelf)},style:{cursor:"pointer"}},this.state.selectedPlace.name," from ",this.state.selectedPlace.title)),i.a.createElement("p",null,"Click the dish to be taken to its Recipi!"));o.a.render(i.a.Children.only(n),document.getElementById("currentInfo"))}},{key:"render",value:function(){var e=this;return this.state.isLoading?i.a.createElement("div",null,"Loading ... "):i.a.createElement(x.Map,{google:this.props.google,zoom:12,style:j,initialCenter:this.state.userLocation},this.state.recipiMarkers,i.a.createElement(x.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose,onOpen:function(t){e.onInfoWindowOpen(e.props,t)}},i.a.createElement("div",{id:"currentInfo"})))}}]),t}(n.Component),R=Object(x.GoogleApiWrapper)({apiKey:"AIzaSyClOhMinsJlKmviBdX43_mVHtn4Uk7qb6k"})(T),O=a(40),L=a(37),M=function(e,t,a,n){var s="minus";a&&(s="plus"),fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n.state.userData,recipeTitle:e,token:n.state.token})}).then(function(e){return e.json()}).then(function(a){a.success?fetch("/api/recipes/".concat(s,"rating"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,token:n.state.token})}).then(function(e){return e.json()}).then(function(a){if(a.success){var s={};fetch("/api/recipes/find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,token:n.state.token})}).then(function(e){return e.json()}).then(function(e){s=e[0];var a=Object(O.a)(n.state.recipes),o=i.a.createElement("div",null,i.a.createElement("p",{style:{paddingTop:"8px"}},"Already voted! - ",i.a.createElement("span",{style:{fontWeight:"bold"}},"Rating: ",s.rating," ")));a[t]=i.a.createElement(L.a,{key:t,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left"}},"    ",i.a.createElement("img",{onClick:function(){n.showDesc(s,o,!1,n)},src:s.image,id:"imgClick",className:"img-fluid shadow p-1 mb-3 rounded recImg"}),i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},n.capitalize_Words(s.title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",s.user," "),i.a.createElement("br",null)," ",n.jsUcfirst(s.description)),o,i.a.createElement("br",null))),n.setState({recipes:a}),n.state.recipeDescription&&(n.setState({recipeDescription:""}),n.showDesc(s,o,function(){n.loadRecipes(n),n.setState({recipeDescription:""})},n)),n.state.searchTerm&&n.handleSearch(),n.state.showMyRecipes&&n.loadRecipes(n)})}}):alert("already voted!")})},I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.loadComments()},a.handleChange=function(e){a.setState({commentText:e.target.value})},a.loadComments=function(){return fetch("/api/comments",{method:"GET",headers:{token:a.state.token,recipe:a.state.title}}).then(function(e){return e.json()}).then(function(e){var t=e.map(function(e,t){return i.a.createElement("div",{key:t,style:{border:"1px solid #6EC2F0",margin:"2px",padding:"10px",borderRadius:"10px"}},i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},e.user)," - ",i.a.createElement("span",{opacity:.5},e.date)),i.a.createElement("p",null,e.comment))});a.setState({comments:t.reverse()})})},a.handleCommentSubmit=function(e){if(e.preventDefault(),a.setState({commentText:""}),!a.state.commentText)return alert("Comment cannot be blank!"),"error";var t=a.state,n=t.title,i=t.commentText,s=t.token,o=a.props.currentUser;fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipe:n,user:o,comment:i,token:s})}).then(function(e){return e.json()}).then(function(e){}).then(function(){a.loadComments()})},a.state={ratingButtons:a.props.ratingButtons,title:a.props.title,user:a.props.user,commentText:"",token:a.props.token,comments:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(k.a,null,i.a.createElement("br",null),i.a.createElement(y.a,{variant:"info",onClick:this.props.goBack},"Go Back"),i.a.createElement("h1",null,this.state.title)," ",i.a.createElement("p",null,"by ",this.state.user),i.a.createElement("img",{className:"img-fluid shadow-lg p-2 mb-3 rounded",style:{maxHeight:550},src:this.props.imgSrc}),this.state.ratingButtons," ",i.a.createElement("p",{style:{margin:"2px",padding:"5px"}},this.props.longDesc),i.a.createElement("div",{style:{border:"2px solid #6EC2F0",margin:"2px",padding:"5px",borderRadius:"5px",backgroundColor:"#f5fcff"}},i.a.createElement("br",null),this.props.elements,i.a.createElement("br",null),i.a.createElement("p",null,this.props.instructions)),i.a.createElement("br",null),i.a.createElement("h3",null,"Leave a comment below!"),i.a.createElement(C.a,{onSubmit:this.handleCommentSubmit},i.a.createElement(C.a.Group,{controlId:"commentInput"},i.a.createElement(C.a.Control,{as:"textarea",rows:"3",placeholder:"Enter comment ...",value:this.state.commentText,onChange:this.handleChange})),i.a.createElement(y.a,{block:!0,type:"submit",variant:"info"},"Submit!")),i.a.createElement("br",null),this.state.comments)}}]),t}(i.a.Component),D=function(e,t,a,n){for(var s=[],o=0;o<e.ingredients.length;o++)s.push(i.a.createElement("div",null,"\u2022"," ",e.ingredients[o],i.a.createElement("br",null)));var r=function(){n.setState({recipeDescription:""})};a&&(r=a);var l=i.a.createElement(I,{token:n.state.token,currentUser:n.state.userData,ratingButtons:t,title:n.capitalize_Words(e.title),user:e.user,imgSrc:e.image,elements:s,longDesc:e.longDescription,instructions:e.instructions,goBack:r});n.setState({recipeDescription:l}),window.scrollTo(0,0)},N=function(e){return e.setState({isLoading:!0}),fetch("/api/recipes",{method:"GET",headers:{token:e.state.token}}).then(function(e){return e.json()}).then(function(t){var a=[],n=[];t.sort(function(e,t){return t.rating-e.rating});for(var s=function(s){var o=fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e.state.userData,recipeTitle:t[s].title,dontChange:!0,token:e.state.token})}).then(function(e){return e.json()}).then(function(a){var o="";o=a.success?i.a.createElement("div",null,i.a.createElement(y.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){e.changeRating(t[s].title,s,!0,e)}}," + "),i.a.createElement(y.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){e.changeRating(t[s].title,s,!1,e)}}," - ")," -",i.a.createElement("span",{style:{fontWeight:"bold"}}," Rating: ",t[s].rating," ")):i.a.createElement("div",null,i.a.createElement("p",{style:{paddingTop:"8px"}},"Already voted! - ",i.a.createElement("span",{style:{fontWeight:"bold"}},"Rating: ",t[s].rating," ")));var r=e.state.recipeTitleByIndex;return r[s]=t[s].title,e.setState({recipeTitleByIndex:r}),e.state.userData===t[s].user&&n.push(i.a.createElement(L.a,{key:s,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left"}},"    ",i.a.createElement("img",{onClick:function(){e.showDesc(t[s],o,!1,e)},src:t[s].image,id:"imgClick",className:"img-fluid shadow p-1 mb-3 rounded recImg"}),i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},e.capitalize_Words(t[s].title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",t[s].user," "),i.a.createElement("br",null)," ",e.jsUcfirst(t[s].description)),o,i.a.createElement("br",null)))),i.a.createElement(L.a,{key:s,xs:"6",sm:"4"},i.a.createElement("div",{style:{textAlign:"left",maxWidth:"100%"}},"    ",i.a.createElement("img",{onClick:function(){e.showDesc(t[s],o,!1,e)},src:t[s].image,id:"imgClick",className:"img-fluid shadow p-1 mb-3 rounded recImg"}),i.a.createElement("p",null,i.a.createElement("span",{style:{fontWeight:"bold"}},e.capitalize_Words(t[s].title))," ",i.a.createElement("br",null),i.a.createElement("span",{style:{fontStyle:"italic"}},"By ",t[s].user," "),i.a.createElement("br",null)," ",e.jsUcfirst(t[s].description)),o,i.a.createElement("br",null)))});a.push(o)},o=0;o<t.length;o++)s(o);Promise.all(a).then(function(t){n[0]||n.push(i.a.createElement("h3",null,"Nothing to show!")),e.setState({recipes:t,myRecipes:n,isLoading:!1})})})},W=function(e){e.setState({isLoading:!0});var t=Math.floor(Math.random()*e.state.recipes.length);fetch("/api/recipes",{method:"GET",headers:{token:e.state.token}}).then(function(e){return e.json()}).then(function(a){fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e.state.userData,recipeTitle:a[t].title,dontChange:!0,token:e.state.token})}).then(function(e){return e.json()}).then(function(n){var s="";s=n.success?i.a.createElement("div",null,i.a.createElement(y.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){e.changeRating(a[t].title,t,!0,e)}}," + "),i.a.createElement(y.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){e.changeRating(a[t].title,t,!1,e)}}," - ")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",a[t].rating," ")):i.a.createElement("div",null,i.a.createElement("p",{style:{paddingTop:"8px"}},"Already voted!")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",a[t].rating," ")),e.showDesc(a[t],s,!1,e),e.setState({isLoading:!1})})})},z=function(e,t){e=e.toLowerCase(),t.setState({showMap:!1,isLoading:!0}),fetch("/api/recipes/find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t.state.token,title:e})}).then(function(e){return e.json()}).then(function(a){fetch("/api/user/didvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t.state.userData,recipeTitle:e,dontChange:!0,token:t.state.token})}).then(function(e){return e.json()}).then(function(e){var n="";if(!a[0])return alert("Recipi not found!"),t.setState({isLoading:!1}),void t.setState({showMap:!0});n=e.success?i.a.createElement("div",null,i.a.createElement(y.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){t.changeRating(a[0].title,0,!0,t)}}," + "),i.a.createElement(y.a,{style:{border:"1px solid black",width:"45px",height:"45px",fontWeight:"bold",fontSize:"20px"},variant:"info",onClick:function(){t.changeRating(a[0].title,0,!1,t)}}," - ")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",a[0].rating," ")):i.a.createElement("div",null,i.a.createElement("p",{style:{paddingTop:"8px"}},"Already voted!")," ",i.a.createElement("p",{style:{fontWeight:"bold"}},"Rating: ",a[0].rating," ")),t.showDesc(a[0],n,!1,t),t.setState({isLoading:!1})})})},B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSearch=function(e){var t="";e?(t=e.target.value,a.setState({searchTerm:t})):t=a.state.searchTerm;var n=t.toLowerCase(),s=a.state.recipes.map(function(e){return a.state.recipeTitleByIndex[e.key].includes(n)?e:i.a.createElement("div",null)});a.setState({filtRecipes:s})},a.state={token:a.props.token,isLoggedIn:!1,userData:"",recipes:[],logout:!1,isLoading:!0,inputRecipe:"",recipeDescription:"",searchTerm:"",recipeTitleByIndex:[],filtRecipes:[],myRecipes:[i.a.createElement("h3",null,"Nothing to show!")],showMyRecipes:!1,toggleMyRecipesText:"Show My Recipis",showMap:!1},a.goBack=a.goBack.bind(Object(h.a)(a)),a.showInput=a.showInput.bind(Object(h.a)(a)),a.changeRating=M.bind(Object(h.a)(a)),a.showDesc=D.bind(Object(h.a)(a)),a.loadRecipes=N.bind(Object(h.a)(a)),a.loadRandomRecipe=W.bind(Object(h.a)(a)),a.toggleMyRecipes=a.toggleMyRecipes.bind(Object(h.a)(a)),a.toggleMap=a.toggleMap.bind(Object(h.a)(a)),a.loadRecipeFromMap=z.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("/api/account/verify",{method:"GET",headers:{"Content-Type":"application/json",token:this.state.token}}).then(function(e){return e.json()}).then(function(t){t.success?(e.setState({isLoggedIn:!0,userData:t.userData.userName,isLoading:!1}),e.loadRecipes(e)):e.setState({isLoggedIn:!1,isLoading:!1})})}},{key:"capitalize_Words",value:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},{key:"jsUcfirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}},{key:"goBack",value:function(e){e&&this.loadRecipes(this),this.setState({inputRecipe:""})}},{key:"toggleMyRecipes",value:function(){this.state.showMyRecipes?this.setState({showMyRecipes:!1,toggleMyRecipesText:"Show My Recipis"}):this.setState({showMyRecipes:!0,toggleMyRecipesText:"Show All Recipis"})}},{key:"toggleMap",value:function(){this.state.showMap?this.setState({showMap:!1}):this.setState({showMap:!0})}},{key:"showInput",value:function(){this.setState({inputRecipe:!0})}},{key:"logout",value:function(e){this.setState({isLoading:!0}),this.props.saveToken(""),this.setState({logout:!0,isLoggedIn:!1,isLoading:!1})}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return i.a.createElement(k.a,{style:{height:"900px"}}," ",i.a.createElement("div",{className:"text-center"},i.a.createElement("h2",{className:"text-center"},"Loading ... ")," "));if(this.state.recipeDescription)return this.state.recipeDescription;if(this.state.logout)return i.a.createElement(d.a,{to:"/"});if(this.state.inputRecipe)return i.a.createElement(k.a,null,i.a.createElement("div",{className:"row align-items-center justify-content-center"},i.a.createElement(w,{user:this.state.userData,token:this.state.token,goBack:this.goBack})));if(this.state.showMap)return i.a.createElement("div",{className:"text-center",style:{height:"900px",margin:"0px"}},i.a.createElement(y.a,{className:"btn",style:{margin:"5px"},variant:"info",onClick:this.toggleMap},"Toggle Map"),i.a.createElement("br",null),i.a.createElement(R,{loadRecipeFromMap:this.loadRecipeFromMap,oldSelf:this,token:this.state.token}));if(this.state.token){if(this.state.isLoggedIn){var t="";return t=""!==this.state.searchTerm?i.a.createElement(S.a,null,this.state.filtRecipes):i.a.createElement(S.a,null,this.state.recipes),this.state.showMyRecipes&&(t=i.a.createElement(S.a,null,this.state.myRecipes)),i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("h3",{className:"text-center"}," Welcome ",this.state.userData,", check out these Recipis!"),i.a.createElement(C.a,{onSubmit:function(e){e.preventDefault()}},i.a.createElement(C.a.Group,{controlId:"formSearchTerms"},i.a.createElement(C.a.Control,{value:this.state.searchTerm,onChange:this.handleSearch,type:"search",placeholder:"Search Recipi titles ..."}))),i.a.createElement("br",null),i.a.createElement("div",{className:"text-center"},i.a.createElement(y.a,{className:"btn",style:{margin:"3px"},variant:"info",onClick:this.showInput},"Post a Recipi"),i.a.createElement(y.a,{className:"btn",style:{margin:"3px"},variant:"info",onClick:this.toggleMyRecipes},this.state.toggleMyRecipesText),i.a.createElement(y.a,{className:"btn",style:{margin:"3px"},variant:"info",onClick:this.toggleMap},"Toggle Map"),i.a.createElement(y.a,{className:"btn",style:{margin:"3px"},variant:"info",onClick:function(){e.loadRandomRecipe(e)}},"Choose For Me")),i.a.createElement("br",null),t,i.a.createElement("br",null),i.a.createElement("div",{className:"text-center"},i.a.createElement(y.a,{className:"btn",variant:"secondary",onClick:function(){e.logout(e.state.token)}},"Logout"))))}return i.a.createElement(k.a,null,i.a.createElement("div",{className:"text-center"},i.a.createElement("p",null,"Loading ... ")))}return this.state.token?void 0:i.a.createElement("div",null,i.a.createElement(d.a,{to:"/"}))}}]),t}(i.a.Component),U=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={token:""},e.saveToken=e.saveToken.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(document.title="Recipi",""===this.state.token&&localStorage.getItem("tokenItem")){var t=localStorage.getItem("tokenItem");this.setState({token:t})}else this.state.token&&fetch("/api/account/verify",{method:"GET",headers:{"Content-Type":"application/json",token:this.state.token}}).then(function(e){return e.json()}).then(function(t){t.success?console.log("token is valid"):e.saveToken("")})}},{key:"saveToken",value:function(e){console.log("saveToken is called with token: "+e),localStorage.setItem("tokenItem",e),this.setState({token:e})}},{key:"render",value:function(){var e=this;return i.a.createElement(p.a,null,i.a.createElement("div",{className:"App"},i.a.createElement("header",{id:"headerClick",style:{backgroundColor:"#6dc4ed"}},i.a.createElement("h1",{onClick:function(){window.location.href="/"},className:"Recipi"}," Recipi ")),i.a.createElement("body",{style:{backgroundColor:"#e6f5fc",color:"#1c7fad",fontFamily:"Quicksand"}},i.a.createElement(d.b,{exact:!0,path:"/",render:function(){return i.a.createElement(d.a,{to:"/login"})}}),i.a.createElement(d.b,{exact:!0,path:"/login",render:function(t){return i.a.createElement(v,Object.assign({},t,{token:e.state.token,saveToken:e.saveToken}))}}),i.a.createElement(d.b,{exact:!0,path:"/home",render:function(t){return i.a.createElement(B,Object.assign({},t,{token:e.state.token,saveToken:e.saveToken}))}}),i.a.createElement("br",null)),i.a.createElement("footer",{style:{backgroundColor:"#6dc4ed"}},"Website built by Nicolai Antonov, 2019")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);o.a.render(i.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.1de2d01e.chunk.js.map